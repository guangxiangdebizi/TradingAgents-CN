# TradingAgents åç«¯ç³»ç»Ÿ - å®Œæ•´æŒ‡å—

æ¬¢è¿ä½¿ç”¨ TradingAgents åç«¯å¾®æœåŠ¡ç³»ç»Ÿï¼è¿™æ˜¯ä¸€ä¸ªåŸºäº FastAPI + MongoDB + Redis + Celery çš„ç°ä»£åŒ–è‚¡ç¥¨åˆ†æå¹³å°ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### âš¡ ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# Linux/Mac
cd backend
chmod +x scripts/quick-start.sh
./scripts/quick-start.sh

# Windows
cd backend
scripts\quick-start.bat
```

> ğŸ’¡ **å›½å†…ç”¨æˆ·ä¼˜åŒ–**: æœ¬é¡¹ç›®å·²é…ç½®é˜¿é‡Œäº‘é•œåƒæºï¼Œå¤§å¹…æå‡ä¸‹è½½é€Ÿåº¦ï¼è¯¦è§ [å›½å†…é•œåƒæºé…ç½®](docs/CHINA_MIRRORS.md)

### ğŸ³ Docker Compose å¯åŠ¨

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
cp backend/.backend_env.example backend/.backend_env
vim backend/.backend_env  # å¡«å…¥APIå¯†é’¥

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 3. éªŒè¯å¯åŠ¨
curl http://localhost:8000/health
```

### ğŸ’» æœ¬åœ°å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
# 1. å¯åŠ¨åŸºç¡€æœåŠ¡ï¼ˆDockerï¼‰
docker-compose -f docker-compose.simple.yml up -d

# 2. è®¾ç½®ç¯å¢ƒå˜é‡
scripts\setup-env.bat  # Windows
source scripts/setup-env.sh  # Linux/Mac

# 3. å¯åŠ¨åº”ç”¨æœåŠ¡ï¼ˆæœ¬åœ°ï¼‰
cd data-service && python app/main.py
cd analysis-engine && python app/main.py
cd api-gateway && python app/main.py

# è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹: LOCAL_DEVELOPMENT.md
```

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   API Gateway   â”‚    â”‚ Analysis Engine â”‚
â”‚   (Vue 3)       â”‚â—„â”€â”€â–ºâ”‚   (Port 8000)   â”‚â—„â”€â”€â–ºâ”‚   (Port 8001)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                        â”‚
                                â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Data Service  â”‚    â”‚   Task Manager  â”‚    â”‚    MongoDB      â”‚
â”‚   (Port 8002)   â”‚    â”‚   (Port 8003)   â”‚    â”‚   (Port 27017)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                        â”‚
         â–¼                       â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Redis       â”‚    â”‚  Celery Worker  â”‚    â”‚     MinIO       â”‚
â”‚   (Port 6379)   â”‚    â”‚  + Celery Beat  â”‚    â”‚ (Port 9000/9001)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ æœåŠ¡è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | ç”¨é€” |
|------|------|------|
| **API Gateway** | http://localhost:8000 | ç»Ÿä¸€APIå…¥å£ |
| **API æ–‡æ¡£** | http://localhost:8000/docs | æ¥å£æ–‡æ¡£å’Œæµ‹è¯• |
| **Analysis Engine** | http://localhost:8001 | è‚¡ç¥¨åˆ†ææœåŠ¡ |
| **Data Service** | http://localhost:8002 | æ•°æ®è·å–æœåŠ¡ |
| **Task API** | http://localhost:8003 | ä»»åŠ¡ç®¡ç†æ¥å£ |
| **Flower ç›‘æ§** | http://localhost:5555 | ä»»åŠ¡æ‰§è¡Œç›‘æ§ |
| **MinIO æ§åˆ¶å°** | http://localhost:9001 | å¯¹è±¡å­˜å‚¨ç®¡ç† |
| **MongoDB ç®¡ç†** | http://localhost:8081 | æ•°æ®åº“ç®¡ç†ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ |
| **Redis ç®¡ç†** | http://localhost:8082 | ç¼“å­˜ç®¡ç†ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ |

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½

### ğŸ” è‚¡ç¥¨åˆ†æ
- **å¤šç»´åº¦åˆ†æ**: æŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€å¸‚åœºæƒ…ç»ªã€æ–°é—»åˆ†æ
- **AIé©±åŠ¨**: æ”¯æŒå¤šç§LLMæ¨¡å‹ï¼ˆDeepSeekã€é€šä¹‰åƒé—®ã€GPTç­‰ï¼‰
- **å®æ—¶åˆ†æ**: å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼Œæ”¯æŒè¿›åº¦è·Ÿè¸ª
- **å†å²è®°å½•**: å®Œæ•´çš„åˆ†æå†å²å’Œç»“æœå­˜å‚¨

### ğŸ“Š æ•°æ®ç®¡ç†
- **å¤šæ•°æ®æº**: Tushareã€AKShareã€BaoStockã€FinnHubç­‰
- **æ™ºèƒ½ç¼“å­˜**: Rediså¤šå±‚ç¼“å­˜ç­–ç•¥
- **æ•°æ®å­˜å‚¨**: MongoDBæ—¶åºé›†åˆä¼˜åŒ–
- **å®æ—¶æ›´æ–°**: å®šæ—¶ä»»åŠ¡è‡ªåŠ¨åŒæ­¥æ•°æ®

### ğŸ• å®šæ—¶ä»»åŠ¡
- **æ•°æ®åŒæ­¥**: æ¯æ—¥è‚¡ç¥¨æ•°æ®ã€è´¢åŠ¡æ•°æ®ã€æ–°é—»æ•°æ®
- **åˆ†æè®¡ç®—**: æŠ€æœ¯æŒ‡æ ‡ã€å¸‚åœºæƒ…ç»ªã€é£é™©è¯„ä¼°
- **ç³»ç»Ÿç»´æŠ¤**: æ•°æ®æ¸…ç†ã€ç¼“å­˜åˆ·æ–°ã€å¤‡ä»½å½’æ¡£
- **æŠ¥å‘Šç”Ÿæˆ**: æ¯æ—¥å¸‚åœºæŠ¥å‘Šã€æŠ•èµ„ç»„åˆæŠ¥å‘Š

### ğŸ”§ ç³»ç»Ÿç®¡ç†
- **å¥åº·ç›‘æ§**: æœåŠ¡çŠ¶æ€æ£€æŸ¥ã€æ€§èƒ½æŒ‡æ ‡
- **æ—¥å¿—ç®¡ç†**: ç»“æ„åŒ–æ—¥å¿—ã€æ—¥å¿—å½’æ¡£
- **é…ç½®ç®¡ç†**: ç¯å¢ƒå˜é‡ã€åŠ¨æ€é…ç½®
- **é”™è¯¯å¤„ç†**: å¼‚å¸¸æ•è·ã€é‡è¯•æœºåˆ¶

## ğŸ§ª æµ‹è¯•å’ŒéªŒè¯

### è‡ªåŠ¨åŒ–æµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´ç³»ç»Ÿè¯Šæ–­
python scripts/debug-tools.py

# APIæ¥å£æµ‹è¯•
python scripts/test-api.py

# MongoDBæ€§èƒ½æµ‹è¯•
python scripts/test-mongodb-performance.py
```

### æ‰‹åŠ¨æµ‹è¯•

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢
curl http://localhost:8000/api/stock/info/000858

# å¯åŠ¨åˆ†æä»»åŠ¡
curl -X POST http://localhost:8000/api/analysis/start \
  -H "Content-Type: application/json" \
  -d '{
    "stock_code": "000858",
    "market_type": "Aè‚¡",
    "research_depth": 3,
    "market_analyst": true,
    "fundamental_analyst": true
  }'

# æŸ¥è¯¢ä»»åŠ¡è¿›åº¦
curl http://localhost:8000/api/analysis/{analysis_id}/progress

# è·å–åˆ†æç»“æœ
curl http://localhost:8000/api/analysis/{analysis_id}/result
```

## ğŸ”§ å¼€å‘å’Œè°ƒè¯•

### å¼€å‘æ¨¡å¼å¯åŠ¨

```bash
# å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d

# å¯åŠ¨å¼€å‘å·¥å…·
docker-compose -f docker-compose.yml -f docker-compose.dev.yml --profile dev-tools up -d
```

### è°ƒè¯•å·¥å…·

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f api-gateway

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it tradingagents-api-gateway bash

# æ•°æ®åº“æ“ä½œ
docker exec -it tradingagents-mongodb mongosh
docker exec -it tradingagents-redis redis-cli

# ä»»åŠ¡ç›‘æ§
open http://localhost:5555  # Flowerç•Œé¢
```

### æ€§èƒ½ç›‘æ§

```bash
# å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# ç³»ç»Ÿæ€§èƒ½æµ‹è¯•
python scripts/debug-tools.py --action perf

# æ•°æ®åº“æ€§èƒ½
python scripts/test-mongodb-performance.py
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | æè¿° |
|------|------|
| **[GETTING_STARTED.md](./GETTING_STARTED.md)** | è¯¦ç»†çš„å¯åŠ¨å’Œé…ç½®æŒ‡å— |
| **[TROUBLESHOOTING.md](./TROUBLESHOOTING.md)** | æ•…éšœæ’é™¤å’Œé—®é¢˜è§£å†³ |
| **[docs/CHINA_MIRRORS.md](./docs/CHINA_MIRRORS.md)** | å›½å†…é•œåƒæºé…ç½®æŒ‡å— |
| **[task-scheduler/README.md](./task-scheduler/README.md)** | å®šæ—¶ä»»åŠ¡ç³»ç»Ÿæ–‡æ¡£ |
| **[scripts/](./scripts/)** | å„ç§å·¥å…·è„šæœ¬ |

## ğŸ”‘ ç¯å¢ƒé…ç½®

### å¿…éœ€çš„APIå¯†é’¥

```bash
# backend/.backend_env æ–‡ä»¶é…ç½®
DASHSCOPE_API_KEY=your_dashscope_api_key_here    # é˜¿é‡Œç™¾ç‚¼ï¼ˆå¿…éœ€ï¼‰
TUSHARE_TOKEN=your_tushare_token_here            # Tushareæ•°æ®ï¼ˆå¿…éœ€ï¼‰
```

### å¯é€‰çš„APIå¯†é’¥

```bash
DEEPSEEK_API_KEY=your_deepseek_api_key_here      # DeepSeek AI
OPENAI_API_KEY=your_openai_api_key_here          # OpenAI GPT
GOOGLE_API_KEY=your_google_api_key_here          # Google Gemini
FINNHUB_API_KEY=your_finnhub_api_key_here        # FinnHubæ•°æ®
```

## ğŸš€ ç”Ÿäº§éƒ¨ç½²

### Docker Compose ç”Ÿäº§æ¨¡å¼

```bash
# ä½¿ç”¨ç”Ÿäº§é…ç½®
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# é…ç½®åå‘ä»£ç†ï¼ˆNginxï¼‰
# é…ç½®SSLè¯ä¹¦
# é…ç½®ç›‘æ§å‘Šè­¦
```

### Kubernetes éƒ¨ç½²

```bash
# å‡†å¤‡K8sé…ç½®æ–‡ä»¶
kubectl apply -f k8s/

# é…ç½®Ingress
# é…ç½®æŒä¹…åŒ–å­˜å‚¨
# é…ç½®è‡ªåŠ¨æ‰©ç¼©å®¹
```

## ğŸ“Š ç›‘æ§å’Œå‘Šè­¦

### å†…ç½®ç›‘æ§

- **Flower**: Celeryä»»åŠ¡ç›‘æ§ (http://localhost:5555)
- **å¥åº·æ£€æŸ¥**: å„æœåŠ¡å¥åº·çŠ¶æ€API
- **æ€§èƒ½æŒ‡æ ‡**: APIå“åº”æ—¶é—´ã€èµ„æºä½¿ç”¨ç‡
- **æ—¥å¿—èšåˆ**: ç»“æ„åŒ–æ—¥å¿—è¾“å‡º

### å¤–éƒ¨ç›‘æ§ï¼ˆæ¨èï¼‰

- **Prometheus + Grafana**: æŒ‡æ ‡æ”¶é›†å’Œå¯è§†åŒ–
- **ELK Stack**: æ—¥å¿—åˆ†æå’Œæœç´¢
- **Jaeger**: åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª
- **AlertManager**: å‘Šè­¦é€šçŸ¥

## ğŸ”’ å®‰å…¨è€ƒè™‘

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨

1. **APIå¯†é’¥ç®¡ç†**: ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡
2. **ç½‘ç»œå®‰å…¨**: é…ç½®é˜²ç«å¢™å’ŒVPN
3. **æ•°æ®åŠ å¯†**: ä¼ è¾“å’Œå­˜å‚¨åŠ å¯†
4. **è®¿é—®æ§åˆ¶**: å®ç°è®¤è¯å’Œæˆæƒ
5. **å®‰å…¨å®¡è®¡**: å®šæœŸå®‰å…¨æ‰«æ

### æ•°æ®å®‰å…¨

1. **æ•°æ®å¤‡ä»½**: å®šæœŸè‡ªåŠ¨å¤‡ä»½
2. **æ•°æ®æ¢å¤**: å¤‡ä»½æ¢å¤æµ‹è¯•
3. **æ•°æ®æ¸…ç†**: æ•æ„Ÿæ•°æ®æ¸…ç†
4. **åˆè§„æ€§**: æ•°æ®ä¿æŠ¤æ³•è§„éµå¾ª

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹

1. **Forké¡¹ç›®** å¹¶åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. **æœ¬åœ°å¼€å‘** ä½¿ç”¨å¼€å‘æ¨¡å¼
3. **ç¼–å†™æµ‹è¯•** ç¡®ä¿ä»£ç è´¨é‡
4. **æäº¤PR** è¯¦ç»†æè¿°å˜æ›´
5. **ä»£ç å®¡æŸ¥** é€šè¿‡ååˆå¹¶

### ä»£ç è§„èŒƒ

- **Python**: éµå¾ªPEP 8è§„èŒƒ
- **API**: RESTfulè®¾è®¡åŸåˆ™
- **æ–‡æ¡£**: è¯¦ç»†çš„ä»£ç æ³¨é‡Š
- **æµ‹è¯•**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

## ğŸ“ è·å–å¸®åŠ©

### é—®é¢˜æ’æŸ¥

1. **æŸ¥çœ‹æ—¥å¿—**: `docker-compose logs -f`
2. **è¿è¡Œè¯Šæ–­**: `python scripts/debug-tools.py`
3. **æ£€æŸ¥é…ç½®**: ç¡®è®¤ç¯å¢ƒå˜é‡æ­£ç¡®
4. **é‡å¯æœåŠ¡**: `docker-compose restart`

### æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£**: æŸ¥çœ‹ç›¸å…³æ–‡æ¡£
- **Issues**: æäº¤GitHub Issues
- **ç¤¾åŒº**: å‚ä¸ç¤¾åŒºè®¨è®º
- **é‚®ä»¶**: è”ç³»æŠ€æœ¯æ”¯æŒ

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨æ‚¨å·²ç»äº†è§£äº† TradingAgents åç«¯ç³»ç»Ÿçš„å…¨è²Œï¼Œè®©æˆ‘ä»¬å¼€å§‹ï¼š

1. **ğŸš€ å¿«é€Ÿå¯åŠ¨**: è¿è¡Œ `./scripts/quick-start.sh`
2. **ğŸ“– æŸ¥çœ‹æ–‡æ¡£**: è®¿é—® http://localhost:8000/docs
3. **ğŸ§ª è¿è¡Œæµ‹è¯•**: æ‰§è¡Œ `python scripts/test-api.py`
4. **ğŸ” ç›‘æ§ç³»ç»Ÿ**: è®¿é—® http://localhost:5555

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’é™¤æŒ‡å—æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚
